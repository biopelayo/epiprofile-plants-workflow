# Snakefile for the EpiProfile_PLANTS workflow
# Minimal placeholder so that the repo already "runs" with Snakemake.
# Later we will replace this with the full WIFF -> mzML -> MS1/MS2 -> EpiProfile_PLANTS pipeline.

import yaml

configfile: "config/config_ontogeny_demo.yml"

# Load the configuration
with open(configfile, "r") as fh:
    cfg = yaml.safe_load(fh)

# Define a very simple rule that just writes a text file in docs/
# to confirm that Snakemake + config + env work.
rule all:
    input:
        "docs/ONTNOGENY_DEMO_OK.txt"

rule demo_touch:
    output:
        "docs/ONTNOGENY_DEMO_OK.txt"
    shell:
        """
        echo "EpiProfile_PLANTS workflow demo run" > {output}
        echo "Project ID: {project}" >> {output}
        echo "Base dir: {base_dir}" >> {output}
        """.format(
            project=cfg.get("project_id", "UNKNOWN"),
            base_dir=cfg.get("base_dir", "NOT_DEFINED")
        )
